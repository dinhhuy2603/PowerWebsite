@{
    ViewBag.Title = "Chart DP-SNACK-3 Online";
    //Layout = "~/Views/Shared/_Layout.cshtml";
}
@section Styles
{
    <link rel="shortcut icon" href="~/Content/images/favicon.ico">

    <!-- App css -->
    <link href="~/Content//css/bootstrap.min.css" rel="stylesheet" type="text/css" id="bs-default-stylesheet" />
    <link href="~/Content/css/app.min.css" rel="stylesheet" type="text/css" id="app-default-stylesheet" />

    <link href="~/Content/css/bootstrap-dark.min.css" rel="stylesheet" type="text/css" id="bs-dark-stylesheet" />
    <link href="~/Content/css/app-dark.min.css" rel="stylesheet" type="text/css" id="app-dark-stylesheet" />

    <!-- icons -->
    <link href="~/Content/css/icons.min.css" rel="stylesheet" type="text/css" />

    <link href="~/Content/css/style.css" rel="stylesheet" type="text/css" />
}
<style>
    .apex-charts {
        height: 380px;
    }

    .highcharts-tooltip span {
        width: 160px !important;
        overflow: auto;
        white-space: normal !important;
        font-size: 12px;
    }

    .highcharts-data-table table {
        font-family: Verdana, sans-serif;
        border-collapse: collapse;
        border: 1px solid #EBEBEB;
        margin: 10px auto;
        text-align: center;
        width: 100%;
        max-width: 500px;
    }

    .highcharts-data-table caption {
        padding: 1em 0;
        font-size: 1.2em;
        color: #555;
    }

    .highcharts-data-table th {
        font-weight: 600;
        padding: 0.5em;
    }

    .highcharts-data-table td, .highcharts-data-table th, .highcharts-data-table caption {
        padding: 0.5em;
    }

    .highcharts-data-table thead tr, .highcharts-data-table tr:nth-child(even) {
        background: #f8f8f8;
    }

    .highcharts-data-table tr:hover {
        background: #f1f7ff;
    }
</style>
<div class="content-page">
    <div class="content">
        <!-- Start Content-->
        <div class="container-fluid">
            <!-- start page title -->
            <div class="row">
                <div class="col-12">
                    <div class="page-title-box">
                        <div class="page-title-right">
                            <ol class="breadcrumb m-0">
                                <li class="breadcrumb-item"><a href="javascript: void(0);">Dashboard</a></li>
                                <li class="breadcrumb-item active"><a href="javascript: void(0);">Charts</a></li>
                            </ol>
                        </div>
                        <h4 class="page-title">Charts DP-SNACK-3 Online</h4>
                    </div>
                </div>
            </div>
            <!-- end page title -->
            <div class="row">
                <div class="col-xl-12 col-md-12">
                    <!-- Portlet card -->
                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <h4 class="header-title mb-0"><b>KW</b></h4>
                                <div class="d-flex align-items-center">
                                    <a href="javascript: void(0);" data-toggle="remove"><i class="mdi mdi-close font-20"></i></a>
                                </div>
                            </div>
                        </div>

                        <div class="card-body">
                            <div class="maximize_height pt-3 show highcharts-figure" dir="ltr">
                                <div id="chart1" class="apex-charts" data-colors="#f672a7"></div>
                            </div> <!-- collapsed end -->
                        </div> <!-- end card-body -->
                    </div> <!-- end card-->
                </div> <!-- end col-->
            </div>
            <!-- end row -->

            <div class="row">
                <div class="col-xl-12 col-md-12">
                    <!-- Portlet card -->
                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <h4 class="header-title mb-0"><b>KWH</b></h4>
                                <div class="d-flex align-items-center">
                                    <a href="javascript: void(0);" data-toggle="remove"><i class="mdi mdi-close font-20"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="maximize_height pt-3 show highcharts-figure" dir="ltr">
                                <div id="chart2" class="apex-charts" data-colors="#6658dd"></div>
                            </div> <!-- collapsed end -->
                        </div> <!-- end card-body -->
                    </div> <!-- end card-->
                </div> <!-- end col-->
            </div>
            <!-- end row -->

            <div class="row">
                <div class="col-xl-12 col-md-12">
                    <!-- Portlet card -->
                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <h4 class="header-title mb-0"><b>Vca-Vbc-Vab-VII</b></h4>
                                <div class="d-flex align-items-center">
                                    <a href="javascript: void(0);" data-toggle="remove"><i class="mdi mdi-close font-20"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="maximize_height pt-3 show highcharts-figure" dir="ltr">
                                <div id="chart3" class="apex-charts" data-colors="#6658dd"></div>
                            </div> <!-- collapsed end -->
                        </div> <!-- end card-body -->
                    </div> <!-- end card-->
                </div> <!-- end col-->
            </div>
            <!-- end row -->

            <div class="row">
                <div class="col-xl-12 col-md-12">
                    <!-- Portlet card -->
                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <h4 class="header-title mb-0"><b>Van-Vbn-Vcn-Vin</b></h4>
                                <div class="d-flex align-items-center">
                                    <a href="javascript: void(0);" data-toggle="remove"><i class="mdi mdi-close font-20"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="maximize_height pt-3 show highcharts-figure" dir="ltr">
                                <div id="chart4" class="apex-charts" data-colors="#6658dd"></div>
                            </div> <!-- collapsed end -->
                        </div> <!-- end card-body -->
                    </div> <!-- end card-->
                </div> <!-- end col-->
            </div>
            <!-- end row -->

            <div class="row">
                <div class="col-xl-12 col-md-12">
                    <!-- Portlet card -->
                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <h4 class="header-title mb-0"><b>Cac-Cab-Caa-Civg</b></h4>
                                <div class="d-flex align-items-center">
                                    <a href="javascript: void(0);" data-toggle="remove"><i class="mdi mdi-close font-20"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="maximize_height pt-3 show highcharts-figure" dir="ltr">
                                <div id="chart5" class="apex-charts" data-colors="#6658dd"></div>
                            </div> <!-- collapsed end -->
                        </div> <!-- end card-body -->
                    </div> <!-- end card-->
                </div> <!-- end col-->
            </div>
            <!-- end row -->

            <div class="row">
                <div class="col-xl-12 col-md-12">
                    <!-- Portlet card -->
                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <h4 class="header-title mb-0"><b>Pa-Pb-Pc-Ptotal</b></h4>
                                <div class="d-flex align-items-center">
                                    <a href="javascript: void(0);" data-toggle="remove"><i class="mdi mdi-close font-20"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="maximize_height pt-3 show highcharts-figure" dir="ltr">
                                <div id="chart6" class="apex-charts" data-colors="#6658dd"></div>
                            </div> <!-- collapsed end -->
                        </div> <!-- end card-body -->
                    </div> <!-- end card-->
                </div> <!-- end col-->
            </div>
            <!-- end row -->
        </div> <!-- container -->

    </div> <!-- content -->

</div>

<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Content/js/vendor.min.js"></script>
<script src="~/Scripts/jquery.signalR-2.4.1.min.js" type="text/javascript"></script>
<script src="~/signalr/hubs" type="text/javascript"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<!-- App js-->
<script src="~/Content/js/app.min.js"></script>
<script type="text/javascript">
    var kenh6 = @Html.Raw(Json.Encode(ViewBag.kenh6));

    $(document).ready(function () {
        Highcharts.setOptions({
            global: {
                useUTC: false
            }
        });

        var chartHub = $.connection.chartHub;
        //Call InitChartData
        $.connection.hub.start().done(function () {
            chartHub.server.initChartKenh6Online();
        });

        chartHub.client.UpdateKenh6Online = function (chart_data) {
            updateChart(chart_data);
        }
    });

    function initData() {
        var data = [];
        var time = Date.now();
        for (var i = -19; i <= 0; i += 1) {
            data.push({ x: time + i * 1000, y: 0 });
        }
        return data;
    }

    let chart_1 = new Highcharts.chart('chart1', {
        chart: {
            type: 'areaspline',
            animation: { duration: 500 },
        },
        title: { text: '' },
        xAxis: { type: 'datetime', tickPixelInterval: 150 },
        yAxis: { title: { text: 'Value' }, plotLines: [{ value: 0, width: 1, color: '#808080' }] },
        tooltip: {
            useHTML:true,
            xDateFormat: '%Y-%m-%d %H:%M:%S',
            shared: true,
            split: false,
            enabled: true,
        },
        legend: { enabled: true },
        credits: { enabled: false },
        exporting: { enabled: true },
        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        align: 'center',
                        verticalAlign: 'bottom',
                        layout: 'horizontal'
                    },
                    yAxis: {
                        labels: {
                            align: 'left',
                            x: 0,
                            y: -5
                        },
                        title: {
                            text: null
                        }
                    },
                    subtitle: {
                        text: null
                    },
                    credits: {
                        enabled: false
                    }
                }
            }]
        },
        series:
        [
          { name: 'Kw', data: initData(), color: '#4e73df' }
        ]
    });
    // Chart Kwh
    let chart_2 = new Highcharts.chart('chart2', {
        chart: {
            type: 'areaspline',
            animation: { duration: 500 },
        },
        title: { text: '' },
        xAxis: { type: 'datetime', tickPixelInterval: 150 },
        yAxis: { title: { text: 'Value' }, plotLines: [{ value: 0, width: 1, color: '#808080' }] },
        tooltip: {
            useHTML:true,
            xDateFormat: '%Y-%m-%d %H:%M:%S',
            shared: true,
            split: false,
            enabled: true,
        },
        legend: { enabled: true },
        credits: { enabled: false },
        exporting: { enabled: true },
        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        align: 'center',
                        verticalAlign: 'bottom',
                        layout: 'horizontal'
                    },
                    yAxis: {
                        labels: {
                            align: 'left',
                            x: 0,
                            y: -5
                        },
                        title: {
                            text: null
                        }
                    },
                    subtitle: {
                        text: null
                    },
                    credits: {
                        enabled: false
                    }
                }
            }]
        },
        series:
        [
          { name: 'Kwh', data: initData(), color: '#ED1B24' },
          { name: 'Kwh in day', data: initData(), color: '#26A9DF' }
        ]
    });
    // Chart Gas Total
    let chart_3 = new Highcharts.chart('chart3', {
        chart: {
            type: 'spline',
            animation: { duration: 500 },
        },
        title: { text: '' },
        xAxis: { type: 'datetime', tickPixelInterval: 150 },
        yAxis: { title: { text: 'Value' }, 
            plotLines: [{ value: 0, width: 1, color: '#808080' }], 
            min: 0,
            max: 500, 
        },
        tooltip: {
            useHTML:true,
            xDateFormat: '%Y-%m-%d %H:%M:%S',
            shared: true,
            split: false,
            enabled: true
        },
        legend: { enabled: true },
        credits: { enabled: false },
        exporting: { enabled: true },
        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        align: 'center',
                        verticalAlign: 'bottom',
                        layout: 'horizontal'
                    },
                    yAxis: {
                        labels: {
                            align: 'left',
                            x: 0,
                            y: -5
                        },
                        title: {
                            text: null
                        }
                    },
                    subtitle: {
                        text: null
                    },
                    credits: {
                        enabled: false
                    }
                }
            }]
        },
        series:
        [
          { name: 'Vca', data: initData(), color: '#ED1B24' },
          { name: 'Vbc', data: initData(), color: '#FBEC31' },
          { name: 'Vab', data: initData(), color: '#2E3094' },
          { name: 'VII', data: initData(), color: '#ff8000' },
        ]
    });
    // Chart Van, Vbn, Vcn, Vin
    let chart_4 = new Highcharts.chart('chart4', {
        chart: {
            type: 'spline',
            animation: { duration: 500 },
        },
        title: { text: '' },
        xAxis: { type: 'datetime', tickPixelInterval: 150 },
        yAxis: { title: { text: 'Value' }, 
            plotLines: [{ value: 0, width: 1, color: '#808080' }], 
            min: 0,
            max: 500, 
        },
        tooltip: {
            useHTML:true,
            xDateFormat: '%Y-%m-%d %H:%M:%S',
            shared: true,
            split: false,
            enabled: true
        },
        legend: { enabled: true },
        credits: { enabled: false },
        exporting: { enabled: true },
        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        align: 'center',
                        verticalAlign: 'bottom',
                        layout: 'horizontal'
                    },
                    yAxis: {
                        labels: {
                            align: 'left',
                            x: 0,
                            y: -5
                        },
                        title: {
                            text: null
                        }
                    },
                    subtitle: {
                        text: null
                    },
                    credits: {
                        enabled: false
                    }
                }
            }]
        },
        series:
        [
          { name: 'Van', data: initData(), color: '#ED1B24' },
          { name: 'Vbn', data: initData(), color: '#FBEC31' },
          { name: 'Vcn', data: initData(), color: '#2E3094' },
          { name: 'Vin', data: initData(), color: '#ff8000' },
        ]
    });
    // Chart Cac, Cab, Caa, Civg
    let chart_5 = new Highcharts.chart('chart5', {
        chart: {
            type: 'spline',
            animation: { duration: 500 },
        },
        title: { text: '' },
        xAxis: { type: 'datetime', tickPixelInterval: 150 },
        yAxis: { title: { text: 'Value' }, plotLines: [{ value: 0, width: 1, color: '#808080' }] },
        tooltip: {
            useHTML:true,
            xDateFormat: '%Y-%m-%d %H:%M:%S',
            shared: true,
            split: false,
            enabled: true
        },
        legend: { enabled: true },
        credits: { enabled: false },
        exporting: { enabled: true },
        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        align: 'center',
                        verticalAlign: 'bottom',
                        layout: 'horizontal'
                    },
                    yAxis: {
                        labels: {
                            align: 'left',
                            x: 0,
                            y: -5
                        },
                        title: {
                            text: null
                        }
                    },
                    subtitle: {
                        text: null
                    },
                    credits: {
                        enabled: false
                    }
                }
            }]
        },
        series:
        [
          { name: 'Cac', data: initData(), color: '#ED1B24' },
          { name: 'Cab', data: initData(), color: '#FBEC31' },
          { name: 'Caa', data: initData(), color: '#2E3094' },
          { name: 'Civg', data: initData(), color: '#ff8000' },
        ]
    });
    // Chart Pa, Pb, Pc, Ptotal
    let chart_6 = new Highcharts.chart('chart6', {
        chart: {
            type: 'spline',
            animation: { duration: 500 },
        },
        title: { text: '' },
        xAxis: { type: 'datetime', tickPixelInterval: 150 },
        yAxis: { title: { text: 'Value' }, plotLines: [{ value: 0, width: 1, color: '#808080' }] },
        tooltip: {
            useHTML:true,
            xDateFormat: '%Y-%m-%d %H:%M:%S',
            shared: true,
            split: false,
            enabled: true
        },
        legend: { enabled: true },
        credits: { enabled: false },
        exporting: { enabled: true },
        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        align: 'center',
                        verticalAlign: 'bottom',
                        layout: 'horizontal'
                    },
                    yAxis: {
                        labels: {
                            align: 'left',
                            x: 0,
                            y: -5
                        },
                        title: {
                            text: null
                        }
                    },
                    subtitle: {
                        text: null
                    },
                    credits: {
                        enabled: false
                    }
                }
            }]
        },
        series:
        [
          { name: 'Pa', data: initData(), color: '#ED1B24' },
          { name: 'Pb', data: initData(), color: '#FBEC31' },
          { name: 'Pc', data: initData(), color: '#2E3094' },
          { name: 'Ptotal', data: initData(), color: '#ff8000' },
        ]
    });

    function updateChart(chartData){
        var series1 = $('#chart1').highcharts().series;
        var series2 = $('#chart2').highcharts().series;
        var series3 = $('#chart3').highcharts().series;
        var series4 = $('#chart4').highcharts().series;
        var series5 = $('#chart5').highcharts().series;
        var series6 = $('#chart6').highcharts().series;
        var t = Date.now();
        for (var j = 0; j < series1.length; j++) {
            switch (j) {
                case 0:
                    {
                        series1[j].addPoint([t, parseFloat(chartData.Ptotal)], false, true);
                        break;
                    }
            }
            chart_1.redraw();
        }
        for (var j = 0; j < series2.length; j++) {
            switch (j) {
                case 0:
                    {
                        series2[j].addPoint([t, parseFloat(chartData.Kwh)], false, true);
                        break;
                    }
                case 1:
                    {
                        series2[j].addPoint([t, parseFloat(chartData.KwhDay)], false, true);
                        break;
                    }
            }
        }
        chart_2.redraw();
        for (var j = 0; j < series3.length; j++) {
            switch (j) {
                case 0:
                    {
                        series3[j].addPoint([t, parseFloat(chartData.Vca)], false, true);
                        break;
                    }
                case 1:
                    {
                        series3[j].addPoint([t, parseFloat(chartData.Vbc)], false, true);
                        break;
                    }
                case 2:
                    {
                        series3[j].addPoint([t, parseFloat(chartData.Vab)], false, true);
                        break;
                    }
                case 3:
                    {
                        series3[j].addPoint([t, parseFloat(chartData.VII)], false, true);
                        break;
                    }
            }
        }
        chart_3.redraw();
        for (var j = 0; j < series4.length; j++) {
            switch (j) {
                case 0:
                    {
                        series4[j].addPoint([t, parseFloat(chartData.Van)], false, true);
                        break;
                    }
                case 1:
                    {
                        series4[j].addPoint([t, parseFloat(chartData.Vbn)], false, true);
                        break;
                    }
                case 2:
                    {
                        series4[j].addPoint([t, parseFloat(chartData.Vcn)], false, true);
                        break;
                    }
                case 3:
                    {
                        series4[j].addPoint([t, parseFloat(chartData.Vin)], false, true);
                        break;
                    }
            }
        }
        chart_4.redraw();

        for (var j = 0; j < series5.length; j++) {
            switch (j) {
                case 0:
                    {
                        series5[j].addPoint([t, parseFloat(chartData.Cac)], false, true);
                        break;
                    }
                case 1:
                    {
                        series5[j].addPoint([t, parseFloat(chartData.Cab)], false, true);
                        break;
                    }
                case 2:
                    {
                        series5[j].addPoint([t, parseFloat(chartData.Caa)], false, true);
                        break;
                    }
                case 3:
                    {
                        series5[j].addPoint([t, parseFloat(chartData.Civg)], false, true);
                        break;
                    }
            }
        }
        chart_5.redraw();

        for (var j = 0; j < series6.length; j++) {
            switch (j) {
                case 0:
                    {
                        series6[j].addPoint([t, parseFloat(chartData.Pa)], false, true);
                        break;
                    }
                case 1:
                    {
                        series6[j].addPoint([t, parseFloat(chartData.Pb)], false, true);
                        break;
                    }
                case 2:
                    {
                        series6[j].addPoint([t, parseFloat(chartData.Pc)], false, true);
                        break;
                    }
                case 3:
                    {
                        series6[j].addPoint([t, parseFloat(chartData.Ptotal)], false, true);
                        break;
                    }
            }
        }
        chart_6.redraw();
    }
    $('.button-menu-mobile').click(function(event){
        $.each([ chart_1, chart_2, chart_3, chart_4, chart_5, chart_6 ], function( index, value ) {
            value.setSize(null);
        });
    })
</script>

<!-- App js -->
